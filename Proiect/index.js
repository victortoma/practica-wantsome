const jsonArray = [

    {
        photo: "./images/Huawei P40 Pro Dual SIM 256GB 8GB RAM Silver Frost.jpg",
        rating: 3.6,
        review: 779,
        name: " P40 Pro Dual SIM 256GB 8GB RAM Silver Frost",
        brand: "Huawei",
        memory: "256",
        price: 799,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone XS Max 256GB Silver.jpg",
        rating: 4.4,
        review: 279,
        name: "iPhone XS Max 256GB Silver",
        brand: "Apple ",
        memory: "256",
        price: 1099,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy Note 10 Plus 256GB 12GB RAM Aura Glow.jpg",
        rating: 4.2,
        review: 979,
        name: "Note 10 Plus 256GB 12GB RAM Aura Glow",
        brand: "Samsung ",
        memory: "256",
        price: 899,
        quantity: 1
    },

    {
        photo: "./images/Samsung Galaxy Z Flip Dual SIM 256GB 8GB RAM Mirror Purple.jpg",
        rating: 4.5,
        review: 1179,
        name: "Z Flip Dual SIM 256GB 8GB RAM Mirror Purple",
        brand: "Samsung ",
        memory: "256",
        price: 1299,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone XR Dual Sim 64GB Red.jpg",
        rating: 4.1,
        review: 379,
        name: "iPhone XR Dual Sim 64GB Red",
        brand: "Apple ",
        memory: "64",
        price: 699,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone X 64GB 4G Space Grey.jpg",
        rating: 4,
        review: 479,
        name: "iPhone X 64GB 4G Space Grey",
        brand: "Apple ",
        memory: "64",
        price: 799,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone 7 32GB 4G Black.jpg",
        rating: 3.4,
        review: 379,
        name: "iPhone 7 32GB 4G Black",
        brand: "Apple ",
        memory: "32",
        price: 499,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone 11 64GB Yellow.jpg",
        rating: 4.2,
        review: 579,
        name: "iPhone 11 64GB Yellow",
        brand: "Apple ",
        memory: "64",
        price: 940,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone 11 Pro 64GB Gold.jpg",
        rating: 4.9,
        review: 679,
        name: "iPhone 11 Pro 64GB Gold",
        brand: "Apple ",
        memory: "64",
        price: 1199,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone 11 128GB Purple.jpg",
        rating: 4.1,
        review: 779,
        name: "iPhone 11 128GB Purple",
        brand: "Apple ",
        memory: "128",
        price: 899,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone SE 2 64GB 4G Black.jpg",
        rating: 3.8,
        review: 879,
        name: "iPhone SE 2 64GB 4G Black",
        brand: "Apple ",
        memory: "64",
        price: 599,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone 11 Pro 128GB Space Grey.jpg",
        rating: 3.9,
        review: 979,
        name: "iPhone 11 Pro 128GB Space Grey",
        brand: "Apple ",
        memory: "128",
        price: 1099,
        quantity: 1

    },
    {
        photo: "./images/Huawei Y7 Dual SIM 32GB 4G Coral Red.jpg",
        rating: 2.3,
        review: 1079,
        name: "Y7 Dual SIM 32GB 4G Coral Red",
        brand: "Huawei ",
        memory: "32",
        price: 499,
        quantity: 1
    },
    {
        photo: "./images/Apple iPhone XS 256GB Space Grey.jpg",
        rating: 4.6,
        review: 679,
        name: "iPhone XS 256GB Space Grey",
        brand: "Apple ",
        memory: "256",
        price: 1040,
        quantity: 1
    },
    {
        photo: "./images/Huawei P20 Pro Dual SIM 64GB 6GB RAM Twilight.jpg",
        rating: 3.3,
        review: 1179,
        name: "P20 Pro Dual SIM 64GB 6GB RAM Twilight",
        brand: "Huawei ",
        memory: "64",
        price: 599,
        quantity: 1
    },

    {
        photo: "./images/Huawei Nova 5T Dual SIM 128GB 6GB RAM Black.jpg",
        rating: 2.8,
        review: 879,
        name: " Nova 5T Dual SIM 128GB 6GB RAM Black",
        brand: "Huawei",
        memory: "128",
        price: 899,
        quantity: 1
    },
    {
        photo: "./images/Huawei Nova 5T Dual SIM 32GB 6GB RAM Midsummer Purple.jpg",
        rating: 3.5,
        review: 979,
        name: "Nova 5T Dual SIM 32GB 6GB RAM Midsummer Purple",
        brand: "Huawei ",
        memory: "32",
        price: 699,
        quantity: 1

    },
    {
        photo: "./images/Huawei Y6P Dual SIM 32GB 4G Midnight Black.jpg",
        rating: 3.3,
        review: 1079,
        name: "Y6P Dual SIM 32GB 4G Midnight Black",
        brand: "Huawei ",
        memory: "32",
        price: 599,
        quantity: 1
    },
    {
        photo: "./images/Huawei P30 Pro Dual SIM 256GB 8GB Aurora Blue.jpg",
        rating: 3.5,
        review: 1179,
        name: "P30 Pro Dual SIM 256GB 8GB Aurora Blue",
        brand: "Huawei ",
        memory: "256",
        price: 699,
        quantity: 1
    },
    {
        photo: "./images/Huawei P30 Lite Dual SIM 128GB 4G Pearl White.jpg",
        rating: 3.6,
        review: 779,
        name: "P30 Lite Dual SIM 128GB 4G Pearl White",
        brand: "Huawei ",
        memory: "128",
        price: 699,
        quantity: 1
    },
    {
        photo: "./images/Huawei Mate XS Dual SIM 256GB 8GB RAM Interstellar Blue.jpg",
        rating: 4.1,
        review: 879,
        name: "Mate XS Dual SIM 256GB 8GB RAM Interstellar Blue",
        brand: "Huawei ",
        memory: "256",
        price: 1199,
        quantity: 1
    },
    {
        photo: "./images/Huawei P40 Lite Dual SIM 128GB 6GB RAM Sakura Pink.jpg",
        rating: 4.6,
        review: 979,
        name: "P40 Lite Dual SIM 128GB 6GB RAM Sakura Pink",
        brand: "Huawei ",
        memory: "128",
        price: 1099,
        quantity: 1

    },
    {
        photo: "./images/Samsung Galaxy A30s Dual SIM 64GB 4G White.jpg",
        rating: 3.3,
        review: 1079,
        name: "A30s Dual SIM 64GB 4G White",
        brand: "Samsung ",
        memory: "64",
        price: 599,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy Note 8 64GB 6GB RAM Gold.jpg",
        rating: 3.5,
        review: 1179,
        name: "Note 8 64GB 6GB RAM Gold",
        brand: "Samsung ",
        memory: "64",
        price: 499,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy S10e Dual SIM 128GB 6GB RAM Cardinal Red.jpg",
        rating: 3.6,
        review: 779,
        name: "S10e Dual SIM 128GB 6GB RAM Cardinal Red",
        brand: "Samsung",
        memory: "128",
        price: 699,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy Note 9 Dual SIM 256GB 8GB RAM Ocean Blue.jpg",
        rating: 3.8,
        review: 879,
        name: "Note 9 Dual SIM 256GB 8GB RAM Ocean Blue",
        brand: "Samsung ",
        memory: "256",
        price: 899,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy S9 Dual SIM 64GB Purple.jpg",
        rating: 3.7,
        review: 979,
        name: "S9 Dual SIM 64GB Purple",
        brand: "Samsung ",
        memory: "64",
        price: 699,
        quantity: 1

    },
    {
        photo: "./images/Samsung Galaxy S20 Plus Dual SIM 128GB 12GB RAM Aura Red.jpg",
        rating: 3.3,
        review: 1079,
        name: "S20 Plus Dual SIM 128GB 12GB RAM Aura Red",
        brand: "Samsung ",
        memory: "128",
        price: 599,
        quantity: 1
    },
    {
        photo: "./images/Samsung Galaxy S20 Ultra Dual SIM 128GB 12GB RAM Cosmic Gray.jpg",
        rating: 3.5,
        review: 1179,
        name: "S20 Ultra Dual SIM 128GB 12GB RAM Cosmic Gray",
        brand: "Samsung ",
        memory: "128",
        price: 840,
        quantity: 1
    },

    {
        photo: "./images/Samsung Galaxy S10 Dual SIM 256GB 8GB RAM Green.jpg",
        rating: 3.5,
        review: 1079,
        name: "S10 Dual SIM 256GB 8GB RAM Green",
        brand: "Samsung ",
        memory: "256",
        price: 699,
        quantity: 1
    }
]

let filtersObject = {
    memory: {
        "32": "32",
        "64": "64",
        "128": "128",
        "256": "256"
    },
    price: 1301,
    rating: 1
}

let cartArray = []

const bodyDiv = document.querySelector("#bodyDiv")
const bodyContent = document.querySelector("#bodyContent")
const displayProducts = document.querySelector('#displayProducts');
const searchInput = document.querySelector('#search');
const selectInput = document.querySelector('#select');
const cart = document.querySelector(".cart");
const footer = document.querySelector("footer")
const logo = document.querySelector("#logo")
const memoryCheckboxes = document.querySelectorAll("#memoryFilter > label > input[type=checkbox]")
const priceCheckboxes = document.querySelectorAll("#priceFilter > label > input[type=checkbox]")
const starsCheckboxes = document.getElementsByName('stars')
const allCheckboxes = [...memoryCheckboxes, ...priceCheckboxes, ...starsCheckboxes]

let populatingDomArray = [] // array care preia itemele din jsonArray
let rememberDomArray = [] //array pentru a reveni la datele initiale

//functii  de adaugare in DOM
const imgFn = (product) => {
    const img = document.createElement('img');
    img.src = product.photo;
    return img;
}

//fn pentru rating Produsului
const ratingFn = (product) => {// 
    let div = document.createElement('div');
    let divStarsOuter = document.createElement('div');
    let divStarsInner = document.createElement('div');
    let span = document.createElement('span');

    div.appendChild(divStarsOuter);
    divStarsOuter.appendChild(divStarsInner);
    div.appendChild(span);
    span.innerText = `${product.review} reviews `;// adauga in span numar de reviewri
    div.classList.add("phoneRating");
    divStarsOuter.classList.add("starsOuter");
    divStarsInner.classList.add("starsInner");
    divStarsInner.style.width = `${product.rating / 5 * 100}%`;// fill inside stars
    // console.log(product.rating)
    return div;
}

//fn descriere nume si brand
const descriptionFn = (product) => {
    let div = document.createElement('div');
    div.innerHTML = product.brand + product.name;
    div.classList.add("phoneDescription");
    return div;
}

//fn pret
const priceFn = (product) => {
    let div = document.createElement('div');
    div.innerHTML = `$${product.price}`;
    div.classList.add("phonePrice");
    return div;
}
//fn button 
const buttonFn = (actionFn, innerText) => {
    let buttonDiv = document.createElement('div');
    const button = document.createElement('button');
    button.innerText = innerText
    buttonDiv.appendChild(button);
    buttonDiv.classList.add("buyPhone");
    button.addEventListener('click', actionFn);
    return buttonDiv;
}
//fn pentru informatii suplimentare divInfo
const fillFn = () => {
    let fillDiv = document.createElement('div')
    let paragraph = document.createElement('p');
    paragraph.innerHTML = "- 5 puncte prin cardul eTAG-Raiffeisen<br> - Deschiderea coletului la livrare<br> - Retur gratuit in 30 de zile detalii<br> - Extra beneficii cu eTAG detalii<br>- Garantie inclusa: detalii"
    fillDiv.appendChild(paragraph)
    return fillDiv
}

const searchIcon = document.querySelector("#searchBox > i")

//REMOVE 
const removeDataFromDom = () => [...document.querySelectorAll(".productDiv")].forEach(product => product.remove())// REMOVE DATA FROM DOM 

//Fn de adaugare a produselor in DOM
const populateDataInDom = (array) => {
    populatingDomArray = []
    for (let product of array) {

        let productDiv = document.createElement('div');
        imgDiv = document.createElement('div');
        infoDiv = document.createElement('div');
        productDiv.classList.add("productDiv");

        displayProducts.appendChild(productDiv);//adaugarea obiectelor in dom
        productDiv.appendChild(imgDiv)
        productDiv.appendChild(infoDiv)
        imgDiv.appendChild(imgFn(product));
        infoDiv.appendChild(ratingFn(product));
        infoDiv.appendChild(descriptionFn(product));
        infoDiv.appendChild(priceFn(product));
        infoDiv.appendChild(buttonFn(addToCart, "ADD TO CART"));
        productDiv.lastElementChild.appendChild(fillFn())// date pentru INFO
        // productDiv.appendChild(buttonFn(returnFn, "Continue Shopping")).style.display = "none";

        populatingDomArray.push(product);
        imgDiv.addEventListener("click", () => {// Fn INFO PRODUS

            productDiv.classList.remove("productDiv")
            productDiv.classList.add("productDivInfo")
                bodyContent.style.display = "none";
            bodyDiv.appendChild(productDiv)
        })
    }
    showResultsFn()// numarul de produse rezultat in urma cautarilor
    return populatingDomArray;
};

//FN de Intoarecere la pagina principala
const returnFn = () => {

    let lastChild = bodyDiv.lastElementChild
    if (lastChild.classList.contains("productDivInfo")) {// verificam daca produsul este in bodyDiv
        productDivInfo = document.querySelector(".productDivInfo")
        bodyDiv.removeChild(productDivInfo);// stergem productDivInfo
        return bodyContent.style.display = "initial"
    }
    return;
}

const linkBack = document.querySelector("#mainMenu > div > a:nth-child(2)")
logo.addEventListener("click", returnFn)
linkBack.addEventListener("click", returnFn)

//fn de adaugare a produsului in Cart

const addToCart = (item) => {
    const productName = item.target.parentElement.previousElementSibling.previousElementSibling.innerText;//valoarea numelui  pentru a gasi produsul in jsonArray
    cart.innerHTML = ""; // golim Cartul
    const jsonProduct = jsonArray.find(product => `${product.brand + product.name}` === productName);// produsul ce urmeaza a fi adaugat
    console.log(jsonProduct)
    item.stopPropagation()
    if (cartArray.length > 0) {
        if (cartArray.find(item => item.name === jsonProduct.name)) {
            alert("Product Already In Cart");
            return populateDataInCart(cartArray);
        }
    }
    cartArray.push(jsonProduct);
    return populateDataInCart(cartArray)
}


// FN de intoarcere la filtrele initiale si pentru debifarea casutelor
const removeAllCheck = () => allCheckboxes.forEach(checkbox => {
    checkbox.checked = false;
    filtersObject = {
        memory: {
            "32": "32",
            "64": "64",
            "128": "128",
            "256": "256"
        },
        price: 1301,
        rating: 1
    }
})


// SEARCH
//fn de afisarea a numarului de rezultate
const showResultsFn = () => {
    const showResults = document.querySelector("#showResults")
    resetSpan = document.createElement('span')
    resetSpan.innerHTML = "Reset Filters"
    resetSpan.addEventListener("click", () => {
        return searchFunction('')
    })

    showResults.innerHTML = `Search Results: ${populatingDomArray.length} phones<br>`
    return showResults.appendChild(resetSpan)
}

//functia de cautare a produselor
const searchFunction = searchText => {

    const regex = new RegExp(`^${searchText}`, 'gi');

    let populatingDomArray = jsonArray.filter((item) =>
        item.name.match(regex) ||
        item.brand.match(regex) ||
        `${item.memory}GB`.match(regex));
    removeDataFromDom();
    removeAllCheck();
    if (populatingDomArray.length === 0) {
        alert("Your search didn't match our products");
        return populateDataInDom(jsonArray);
    }
    populateDataInDom(populatingDomArray)//prima apelare a PopulateData
    rememberDomArray = [...populatingDomArray];//array pentru a reda ultima cautare pentru filtrari
    window.scrollTo(0, 0)
    return rememberDomArray;
}
searchFunction("");//apelarea fn de populare

searchInput.addEventListener("keyup", () => {// Search ENTER
    if (event.keyCode === 13) {
        searchFunction(search.value);
        search.value = "";
        return true;
    }
    return false;
})


// const resetFn =  function() {
//     // return console.log("dasdsad") 
//     // removeAllCheck()
//     // return populateDataInDom(jsonArray)
// }
// fn pentru optiunile select 
const sortByFn = () => {

    if (selectInput.value === "relevance") { // 
        removeDataFromDom();
        populateDataInDom(jsonArray);
    }

    if (selectInput.value === "priceAscending") {
        removeDataFromDom();
        populateDataInDom(filterPrice(populatingDomArray));
    }

    else if (selectInput.value === "priceDescending") {
        removeDataFromDom();
        populateDataInDom(filterPriceDescending(populatingDomArray));
    }

    else if (selectInput.value === "rating") {
        removeDataFromDom();
        populateDataInDom(filterRating(populatingDomArray));
    }
}

//Functii pentru sortari select area
const filterPrice = (array) => array.sort((a, b) => a.price - b.price);
const filterPriceDescending = (array) => array.sort((a, b) => b.price - a.price);
const filterRating = (array) => array.sort((a, b) => b.rating - a.rating);

selectInput.addEventListener("change", sortByFn);

//FILTER
// FILTRARI CHECKBOXES

//fn pentru rating
const checkRatingFn = () => {
    let checkboxArray = [];

    starsCheckboxes.forEach(checkbox => {
        if (checkbox.checked) {
            checkboxArray.push(checkbox);
            filtersObject.rating = Number(checkbox.value)// modifica valoarea ratingului din filterObj
        }
    })
    if (checkboxArray.length < 1) {
        filtersObject.rating = 1
    }
    return filterCheckedFn()
}
//fn pentru storage
const checkMemoryFn = () => {
    let checkboxArray = []
    memoryCheckboxes.forEach(checkbox => {

        if (checkbox.checked) {

            checkboxArray.push(checkbox)
            filtersObject.memory[checkbox.value] = checkbox.value
        }
        else filtersObject.memory[checkbox.value] = ""
    })

    if (checkboxArray.length < 1) {//daca sunt debifate casutele, modifica parametrii de filtrare
        filtersObject.memory["32"] = "32";
        filtersObject.memory["64"] = "64";
        filtersObject.memory["128"] = "128";
        filtersObject.memory["256"] = "256";
    }
    return filterCheckedFn()
}
//fn Pret
const checkPriceFn = () => {
    let checkboxArray = [];

    priceCheckboxes.forEach(checkbox => {
        if (checkbox.checked) {
            checkboxArray.push(checkbox);
            filtersObject.price = Number(checkbox.value);
        }
    })
    if (checkboxArray.length < 1) {
        filtersObject.price = 1301;
    }
    return filterCheckedFn()
}
//fn de filtrare in urma cautarii sau a sortarii
const filtersFn = (obj) => {//filtrare obiecte DOM

    const results = rememberDomArray
        .filter(product => {
            return product.memory === obj.memory["32"]
                || product.memory === obj.memory["64"]
                || product.memory === obj.memory["128"]
                || product.memory === obj.memory["256"]
        })
        .filter(product => {
            if (obj.price > 1300) {
                return product.price < obj.price;
            }
            if (obj.price === 1300) {
                return (obj.price - 300 < product.price && product.price < obj.price);
            }
            else { return obj.price - 200 < product.price && product.price < obj.price; }
        })
        .filter(product => product.rating >= obj.rating)
    window.scrollTo(0, 205)
    return results
}

// DE FACUT FN GENUL ASTA SI PENTRU MEMORY, STARS
const filterCheckedFn = (checkbox) => {

    removeDataFromDom()
    populateDataInDom(filtersFn(filtersObject))
    if (populatingDomArray.length < 1) {
        alert("No matches for your search")
        removeAllCheck()// scoate casutele
        populateDataInDom(rememberDomArray)
    }
    return
}
// fn pentru debifarea 
const onlyOneStar = (checkbox) => {//const
    let checkboxes = document.getElementsByName('stars')
    checkboxes.forEach((item) => {
        if (item !== checkbox) item.checked = false
    })
}

const onlyOnePrice = (checkbox) => {
    let checkboxes = document.getElementsByName('price')
    checkboxes.forEach((item) => {
        if (item !== checkbox) {
            item.checked = false
        }
    })
}

let memoryFilterDiv = document.querySelector("#memoryFilter");
let priceFilterDiv = document.querySelector("#priceFilter");
let ratingFilterDiv = document.querySelector("#ratingFilter");
memoryFilterDiv.addEventListener('change', checkMemoryFn);
priceFilterDiv.addEventListener('change', checkPriceFn)
ratingFilterDiv.addEventListener('change', checkRatingFn)

//CART

cart.addEventListener("click", () => {// in cazul in care produsele sunt scoase din CArt
    let wrapperCart = document.querySelector("#wrapperCart")
    if (cartArray.length < 1) {// daca e gol arrayul
        cart.innerHTML = "There Are No Products In Your Cart"
        return wrapperCart.classList.toggle("hideCart")// shimbam clasa pentru a ascunde Cartul
    }
    return
})
//fn de scoatere a produselor din Cart
const removeFromCart = (item) => {// remove product from cartArray

    const productName = item.target.parentElement.previousElementSibling.previousElementSibling.innerText
    let productIndex = cartArray.indexOf(cartArray.find(product => `${product.brand + product.name}` === productName))
    cartArray.splice(productIndex, 1)

    return populateDataInCart(cartArray)
}

//fn pentru ascunderea cartului
const hideCartFn = (event) => { // fn de ascundere a Cartului
    let cart = document.querySelector("#wrapperCart")
    cart.classList.toggle("hideCart")
    event.stopPropagation()
}

// fn de calcul pentru cart
const totalPriceFn = (array) => array.reduce((total, product) => total + product.price * Number(product.quantity), 0);
// fn de adaugarea produselor in Cart
const populateDataInCart = (array) => {

    populatingCartArray = []
    cart.innerHTML = ""
    //buton inchidere cart
    closeBtn = document.createElement('button');
    cart.appendChild(closeBtn)
    closeBtn.classList.add("closeBtn")
    closeBtn.addEventListener("click", hideCartFn)

    for (let product of array) {

        let productDiv = document.createElement('div');
        imgDiv = document.createElement('div');
        infoDiv = document.createElement('div');
        productDiv.classList.add("productDivCart");

        cart.appendChild(productDiv);//adaugarea obiectelor in cart
        productDiv.appendChild(imgDiv)
        productDiv.appendChild(infoDiv)
        imgDiv.appendChild(imgFn(product));
        infoDiv.appendChild(descriptionFn(product));
        infoDiv.appendChild(quantityFn(product))
        infoDiv.appendChild(priceFn(product));
        infoDiv.appendChild(buttonFn(removeFromCart, "Remove"));// fn de remove
        populatingCartArray.push(product)
    }

    //icon span numar obiecte cart
    iconSpan = document.createElement('span');
    const icon = document.querySelector(".fa-shopping-cart")
    icon.innerHTML = "";// remove spans
    icon.appendChild(iconSpan)// adauga span pentru cart numar de obiecte
    iconSpan.innerHTML = cartArray.length

    //buton Total Price    
    totalPrice = document.createElement('button');
    totalPrice.classList.add("totalPrice")
    totalPrice.innerHTML = `Proceed to Checkout - Total Price: $${totalPriceFn(array)}`
    totalPrice.addEventListener("click", () => {
        alert("THANK YOU FOR YOUR PURCHASE!")
        window.scrollTo(0, 0)
        cartArray = [];
        return icon.innerHTML = ""
    })
    cart.appendChild(totalPrice)
    return populatingCartArray
};

//fn care schimba cantitatea de obiecte ce urmeaza a fi cumparata
const quantityFn = (product) => {

    let div = document.createElement('div')
    let input = document.createElement('input')
    input.setAttribute("type", "number")
    input.setAttribute("value", `${product.quantity}`)
    input.setAttribute("min", 1)
    input.setAttribute("max", 99)
    input.addEventListener("change", () => {
        if (input.value < 1 || input.value > 99) {
            alert('Please select a value between 1 to 99')
            return input.value = "1"
        }
        product.quantity = input.value // valoarea inputului schimba valoarea cantitaii produsului din obiect
        return populateDataInCart(cartArray)
    })
    div.appendChild(input)
    return div
}

document.querySelector(".fa-shopping-cart").addEventListener("click", hideCartFn)// selectarea Cartului

// fn de ascunderea sectiunii de filtrare in mod tableta
const hideSidebarFn = () => {

    let hideSidebar = document.querySelector(".sideBar")
    let displayProducts = document.querySelector("#displayProducts")
    hideSidebar.classList.toggle("revealSidebar")
    displayProducts.classList.toggle("displayMargin")
}

const toggleBtn = document.querySelector("#toggleFilters")
toggleBtn.addEventListener('click', hideSidebarFn)

//fn de reset a sidebarului
window.addEventListener('resize', function () {

    let hideSidebar = document.querySelector(".sideBar")
    let displayProducts = document.querySelector("#displayProducts")

    if (window.innerWidth > 1000) {// de revazut
        if (hideSidebar.classList.contains("revealSidebar")) {
            hideSidebar.classList.remove("revealSidebar")
            return displayProducts.classList.remove("displayMargin")
        }
    }
})

//functia de minimizare pentru filter
const rotateClass = document.querySelectorAll(".rotateClass")
rotateClass.forEach(item => {
    item.addEventListener('click', () => {
        item.parentElement.parentElement.classList.toggle("minimize")

        return item.classList.toggle("rotateClass")
    })
})
